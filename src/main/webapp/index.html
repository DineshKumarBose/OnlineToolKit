<!DOCTYPE html>
<html>
<head>
<title>Online Kit</title>
<meta name="description" content="Online tool for software users and developers">
 <meta name="keywords" content="compare list, find duplicate, remove duplicates, leafsoft,comparelist,merge list,combine list, jsonviewer, jsontocsv, json validator, json minifier">
 <meta name="author" content="Dinesh Kumar">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/index.css">
<link rel="stylesheet" href="css/jsonview.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<script src="js/jsonview.js"></script>

 <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> --> 
</head>
<header>
<div id="logobox">
    <a href="#home" id="logo">
        <img src="images/leafsoft.png" id="leaflogo">
        </a>
    </div>  
</header>
<body onload="loadhash()">
<div class="navbar">
  <a class="active menu" href="#home" id='home'>Home</a>
  <a href="#news" class="menu">News</a>
  <div class="dropdown">
    <button class="dropbtn">Tools 
      <i class="fa fa-caret-down"></i>
    </button>
    <div class="dropdown-content">
      <a href="#comparetool" class="menu" id="comparetool">Compare List</a>
      <a href="#jsonviewer" class="menu" id="jsonviewer">JSON Viewer</a>
    </div>
  </div> 
</div>
<div style="padding-left:16px; display:none" class='container pagediv texteditor' id='divcomparetool'>
  <h2><b>Compare two lists</b></h2>
 <table border="1" class="">
		<tbody><tr align="CENTER" center="">
		<td><b>List 1 (one per line):</b></font></td>
		<td><b>List 2 (one per line):</b></font></td>
		</tr>
	<tr align="CENTER" center="">
		<td><textarea name="list1" id="list1" rows="10" cols="20"></textarea></td>
		<td><textarea name="list2" id="list2" rows="10" cols="20"></textarea></td>
	</tr>
</tbody></table>
<br>
<input type="checkbox" name="case" id="case_checkbox" value="insensitive">
<font color="FF0000" size="4">Case insensitive</font>
<br>
  <br>
  <span>
	  <button class="button" id="comparebutton">Compare</button>
  </span>
</div>
<div style="padding-left:16px; display:none" class='pagediv texteditor' id='divcompareresult'>
  <h2>Comparison of two lists</h2>
  <div>
  <table border="1" class="">
	<tr align="CENTER" center="">
		<td>List 1 :<br><textarea name="resultlist1" id="resultlist1" rows="10" cols="20"></textarea></td>
		<td>Only in 1 :<br><textarea name="onlylist1" id="onlylist1" rows="10" cols="20"></textarea></td>
		<td>1 or 2 :<br><textarea name="oneortwo" id="oneortwo" rows="10" cols="20"></textarea></td>
		</tr>
		<tr align="CENTER">
		<td>List 2 :<br><textarea name="resultlist2" id="resultlist2" rows="10" cols="20"></textarea></td>
		<td>Only in 2 :<br><textarea name="onlylist2" id="onlylist2" rows="10" cols="20"></textarea></td>
		<td>1 and 2 :<br><textarea name="commonlist" id="commonlist" rows="10" cols="20"></textarea></td>
	</tr>
</tbody></table>
  </div>
  <br>
  <span><b>Notes : </b>Comparisons are <b id="case_display">case-sensitive</b>.<br>
Duplicate entries are removed from each list before processing<br>
and all lists are alphabetically ordered. 
  </span><br><br>
  <a href="#comparetool" class='anchor' tab='comparetool'>Compare two more lists</a><br><br>
</div>
<div style="padding-left:16px; display:none" class='pagediv texteditor' id='divjsonviewer'>
  <h2><b>JSON Viewer</b></h2>
  <table  border="1" class="">
  <thead>
		<tr align="CENTER" center="">
		<th><b>Input Json:</b></font></th>
		<th><b>Options</b></font></th>
		<th><b>Result Json:</b></font></th>
		</tr>
		</thead>
		<tbody>
	<tr align="CENTER" center="">
		<td><textarea name="inputjson" id="inputjson" rows="32" cols="60"></textarea></td>
		<td><button class="button" id="treeview">Tree View</button><br><button class="button" id="formatjson">Format</button><br><select class="span11" id="nojsontab"> <option value="2" selected="selected">2 Tab Space</option> <option value="3">3 Tab Space</option> <option value="4">4 Tab Space</option> </select><br><br><button class="button" id="minifyjson">Minify</button><br><button class="button" id="jsontocsv">Get CSV</button></td>
		<td id="output_col"><textarea name="outputjson" id="outputjson" rows="32" cols="60"></textarea></td>
	</tr>
</tbody></table>
</div>
<div style="padding-left:16px; display:none" class='pagediv' id='divhome'>
  <h2>Welcome</h2>
  LeafSoft is development center which produce online tools to reduce the users and developers time from day to day activities.<br> Here is our tools which will grow by nature.<br><br>
  <a href="#comparetool" class='anchor' tab='comparetool'>Compare two more lists</a><br><br>
  <a href="#jsonviewer" class='anchor' tab='jsonviewer'>JSON Viewer</a><br><br>
</div>
</body>
<footer>
<font size="-1" class="">
	Comments, problems, or questions? &nbsp;
	<a href="mailto:gbell@wi.mit.edu">dinesh@devutil.xyz</a>
	</font>
</footer>
<script>
$(document).ready(function(){
	$('textarea').each(function(){
        $(this).val($(this).val().trim());
    }
	);
	$(".menu").click(function(){
		var currentmenu = $(this).attr('id');
		setActiveTab(currentmenu);
	});
	
	$(".anchor").click(function(){
		var currentmenu = $(this).attr('tab');
		setActiveTab(currentmenu);
});
	
	$("#comparebutton").click(function() {
		var list1 = $("#list1").val();
		var list2 = $("#list2").val();
		var case_insensitive = $('#case_checkbox').prop('checked');
		if(list1 == '' && list2 == '') {
			return;
		}
		var inputJson = {};
		inputJson.list1 = list1;
		inputJson.list2 = list2;
		inputJson.case_insensitive = case_insensitive;
		var JSONString = JSON.stringify(inputJson);
		$.ajax({
			url: "rest/comparelist",
			type: "POST",
			data : JSONString,
			contentType: 'application/json',
			success: function(data) {
				$("#divcomparetool").hide();
				$('#divcompareresult').show();
				if(case_insensitive) {
					$("#case_display").html("case-insensitive");
				}
				for(key in data) {
					$("#"+key).val(data[key]);
				}
			},
			error: function(jqXHR, exception) {
				$('#errorMsg').html("Validation ERROR : "+jqXHR.responseText);
				$('#outputJson').html("");
			}
		})
	});
	
	$('body').on('click','#formatjson',function(){
		var inputJson = $('#inputjson').val();
		if(inputJson == '')
            return;
		$('#output_col').html('<textarea name="outputjson" id="outputjson" rows="32" cols="60"></textarea>');
		$.ajax({
			url: "rest/jsonformatter",
			type: "POST",
			data : inputJson,
			contentType: 'application/json',
			success: function(data) {
				var notab = parseInt($("#nojsontab").val());
				$('#outputjson').html(JSON.stringify(data, null, notab));
			},
			error: function(jqXHR, exception) {
				$('#outputjson').val(jqXHR.responseText);
			}
		})
	});
	$('body').on('click','#minifyjson',function(){
		var inputJson =  $('#inputjson').val();
		if(inputJson == '')
            return;
		$('#output_col').html('<textarea name="outputjson" id="outputjson" rows="32" cols="60"></textarea>');
		$.ajax({
			url: "rest/jsonformatter",
			type: "POST",
			data : inputJson,
			contentType: 'application/json',
			success: function(data) {
				$('#outputjson').html(JSON.stringify(data));
			},
			error: function(jqXHR, exception) {
				$('#outputjson').val(jqXHR.responseText);
			}
		})
	});
	
	$('#treeview').click(function(){
        var data = $('#inputjson').val();
        if(data == '')
            return;
        $('#output_col').html('<td><div class="root"></div></td>');
        var target = '.root';
        jsonView.format(data, target);
    });
	
	$('#jsontocsv').click(function(){
        var data = $('#inputjson').val();
        if(data == '')
            return;
        
		JSONToCSVConvertor(data,"leafsoft",true);
    });
	
	function JSONToCSVConvertor(JSONData, ReportTitle, ShowLabel) {
	    //If JSONData is not an object then JSON.parse will parse the JSON string in an Object
	    var arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;
	    
	    var CSV = '';    
	    //Set Report title in first row or line
	    
	    CSV += ReportTitle + '\r\n\n';

	    //This condition will generate the Label/Header
	    if (ShowLabel) {
	        var row = "";
	        
	        //This loop will extract the label from 1st index of on array
	        for (var index in arrData[0]) {
	            
	            //Now convert each value to string and comma-seprated
	            row += index + ',';
	        }

	        row = row.slice(0, -1);
	        
	        //append Label row with line break
	        CSV += row + '\r\n';
	    }
	    
	    //1st loop is to extract each row
	    for (var i = 0; i < arrData.length; i++) {
	        var row = "";
	        
	        //2nd loop will extract each column and convert it in string comma-seprated
	        for (var index in arrData[i]) {
	            row += '"' + arrData[i][index] + '",';
	        }

	        row.slice(0, row.length - 1);
	        
	        //add a line break after each row
	        CSV += row + '\r\n';
	    }

	    if (CSV == '') {        
	        alert("Invalid data");
	        return;
	    }   
	    
	    //Generate a file name
	    var fileName = "MyReport_";
	    //this will remove the blank-spaces from the title and replace it with an underscore
	    fileName += ReportTitle.replace(/ /g,"_");   
	    
	    //Initialize file format you want csv or xls
	    var uri = 'data:text/csv;charset=utf-8,' + escape(CSV);
	    
	    // Now the little tricky part.
	    // you can use either>> window.open(uri);
	    // but this will not work in some browsers
	    // or you will not get the correct file extension    
	    
	    //this trick will generate a temp <a /> tag
	    var link = document.createElement("a");    
	    link.href = uri;
	    
	    //set the visibility hidden so it will not effect on your web-layout
	    link.style = "visibility:hidden";
	    link.download = fileName + ".csv";
	    
	    //this part will append the anchor tag and remove it after automatic click
	    document.body.appendChild(link);
	    link.click();
	    document.body.removeChild(link);
	}
	
	
});
function loadhash() {
	var hash = location.hash.substr(1);
	if(hash !== undefined && hash !== "") {
		setActiveTab(hash);
	} else {
		setActiveTab('home');
	}
}
function setActiveTab(tabid) {
	$(".pagediv").hide();
	var previoiusmenu = $(".active").attr('id');
	$(".active").removeClass("active");
	$("#div"+previoiusmenu).hide();
	var currentmenu = tabid;
	$("#"+tabid).addClass("active");
	$("#div"+currentmenu).show();
	$("textarea").val("");
	
}
</script>
</html>
